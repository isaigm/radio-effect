CREATE OR REPLACE FUNCTION notify_products_update() RETURNS TRIGGER AS $$
BEGIN
    PERFORM pg_notify('products_updated', 'update');
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_products
AFTER INSERT OR UPDATE OR DELETE ON products
FOR EACH ROW EXECUTE FUNCTION notify_products_update();